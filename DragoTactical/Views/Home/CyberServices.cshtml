@model IEnumerable<DragoTactical.Models.Service>
@{
    ViewData["Title"] = "Cyber Services";
}

<!-- Security headers -->
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self'; frame-ancestors 'none';">  @* Prevents clickjacking *@
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">  @* Further clickjacking protection *@
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin"> @* Prevents referrer leaks *@
<meta http-equiv="Permissions-Policy" content="geolocation=(), camera=(), microphone=()">

<div class="dt-cyber-services">
    <!-- BlueTech Decorative Images -->
    <div class="dt-cyber-bluetech-left">
        <img src="~/images/BlueTech.png" alt="BlueTech Left" loading="lazy" />
    </div>
    <div class="dt-cyber-bluetech-right">
        <img src="~/images/BlueTechR.png" alt="BlueTech Right" loading="lazy" />
    </div>
    <

    <!-- Cyber Content Section with Light Grey Background -->
    <div class="dt-cyber-content-wrapper">
        <!-- Cyber Threat Section -->
        <div class="dt-cyber-threat-section">
            <h1 class="dt-cyber-threat-title">How big is your Cyber Threat Surface?</h1>
            <div class="dt-cyber-threat-hero">
                <div class="dt-cyber-threat-content">
                    <p>Cyber threats are no longer a distant risk. They're a daily reality. Every click, connection, and device opens a door that hackers can exploit. What was once small-scale crime has grown into a global threat capable of stealing billions, shutting down businesses, and even endangering national security. The question isn't if you'll face a cyber threat, but when.</p>
                </div>
            </div>
        </div>

        <!-- Cyber Services Grid -->
        <div class="dt-cyber-services-grid">
            @if (Model != null)
            {
                foreach (var service in Model)
                {

                    <div class="col-md-6 d-flex flex-column">
                            <div class="dt-cyber-grid-item w-100">
                        <div class="dt-cyber-grid-image">
                            <img src="~/images/18.png" alt="@service.ServiceName" />
                            <div class="dt-cyber-grid-content">
                                <div class="dt-cyber-grid-text">
                                    <h3 class="dt-cyber-grid-title">@service.Title</h3>
                                    <p class="dt-cyber-grid-paragraph">@service.Description</p>
                                </div>
                            </div>
                        </div>
                       </div>
                    </div>
                }
            }
        </div>
    </div>

    <!-- Blue Background Section -->
    <div class="dt-blue-content-wrapper" style="display: flex; flex-direction: column; min-height: 100vh;">
        <!-- Transition section -->
        <div class="dt-cyber-transition"></div>

        <!-- The Road Ahead Section -->
        <div class="dt-road-ahead-section">
        <div class="dt-road-ahead-decorative-left">
            <img src="~/images/RoundTechR.png" alt="Decorative Tech Left" loading="lazy" />
        </div>
        <div class="dt-road-ahead-decorative-right">
            <img src="~/images/RoundTechL.png" alt="Decorative Tech Right" loading="lazy" />
        </div>
        <div class="dt-road-ahead-content">
            <h2 class="dt-road-ahead-title">The Road Ahead</h2>
            <p class="dt-road-ahead-paragraph">As our world becomes more digitally connected through cloud services, IoT devices, and artificial intelligence, the attack surface grows even larger. This means cyber threats will continue to escalate unless individuals, organizations, and governments invest in stronger security measures, regular monitoring, and international cooperation.</p>
        </div>
    </div>

    <div class="dt-cyber-contact-section">
        <div class="dt-cyber-contact-content">
            <h2 class="dt-cyber-contact-title">Contact Us</h2>
            <p class="dt-cyber-contact-subtitle">Ready to secure your digital infrastructure?</p>

            <div class="security-warning">
                This form is secured with CSRF protection and input validation. All data is sanitized before processing.
            </div>

            @if (TempData["SuccessMessage"] != null)
            {
                <div class="alert alert-success" role="alert">
                    @TempData["SuccessMessage"]
                </div>
            }

            @if (TempData["ErrorMessage"] != null)
            {
                <div class="alert alert-danger" role="alert">
                    @TempData["ErrorMessage"]
                </div>
            }

            <form class="dt-cyber-contact-form" method="post" action="/Contact/Submit" id="cyberContactForm" novalidate autocomplete="off">
                @Html.AntiForgeryToken()  @* Prevent CSRF attacks *@
                <div class="row g-3">
                    <div class="col-12">
                        <input class="form-control dt-cyber-input" name="FirstName" type="text" placeholder="First Name*" required
                               minlength="2" maxlength="50" pattern="^[A-Za-z\s]{2,50}$"
                               title="Only letters allowed (2-50 characters)" />
                        <div class="invalid-feedback" id="firstName-error">First name is required (letters only, 2-50 characters).</div>
                    </div>
                    <div class="col-12">
                        <input class="form-control dt-cyber-input" name="LastName" type="text" placeholder="Last Name*" required
                               minlength="2" maxlength="50" pattern="^[A-Za-z\s]{2,50}$"
                               title="Only letters allowed (2-50 characters)" />
                        <div class="invalid-feedback" id="lastName-error">Last name is required (letters only, 2-50 characters).</div>
                    </div>
                    <div class="col-12">
                        <input class="form-control dt-cyber-input" name="Email" type="email" placeholder="Email*" required
                               maxlength="254" />
                        <div class="invalid-feedback" id="email-error">Email must contain &#64; symbol and valid domain (e.g., user&#64;example.com).</div>
                    </div>
                    <div class="col-12">
                        <input class="form-control dt-cyber-input" name="PhoneNumber" type="tel" placeholder="Phone*" required minlength="10" maxlength="15" pattern="^\+?[0-9\s\-]{10,15}$" title="Enter a valid phone number" />
                        <div class="invalid-feedback" id="phone-error">Phone must be numbers only (10-15 digits, + allowed at start).</div>
                    </div>
                    <div class="col-12">
                        <input class="form-control dt-cyber-input" name="CompanyName" type="text" placeholder="Company name (Optional)"
                               maxlength="100" pattern="^[^<>]{0,100}$"
                               title="No invalid characters allowed" />
                        <div class="invalid-feedback" id="company-error">Company name cannot contain < or > characters.</div>
                    </div>
                    <div class="col-12">
                        <select class="form-select dt-cyber-input" name="Location" required>
                            <option value="" disabled selected>Location*</option>
                            <option value="Eastern Cape">Eastern Cape</option>
                            <option value="Free State">Free State</option>
                            <option value="Gauteng">Gauteng</option>
                            <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                            <option value="Limpopo">Limpopo</option>
                            <option value="Mpumalanga">Mpumalanga</option>
                            <option value="Northern Cape">Northern Cape</option>
                            <option value="North West">North West</option>
                            <option value="Western Cape">Western Cape</option>
                        </select>
                        <div class="invalid-feedback" id="location-error">Please select your location from the dropdown.</div>
                    </div>
                    <div class="col-12">
                        <select class="form-select dt-cyber-input" name="ServiceId" required>
                            <option value="" disabled selected>Cyber Services of Interest*</option>
                            @if (Model != null)
                            {
                                foreach (var service in Model)
                                {
                                    <option value="@service.ServiceId">@service.ServiceName</option>
                                }
                            }
                            <option value="0">Other</option>
                        </select>
                        <div class="invalid-feedback" id="service-error">Please select a cyber service from the dropdown.</div>
                    </div>
                    <div class="col-12">
                        <textarea class="form-control dt-cyber-input" name="Message" rows="4" placeholder="Message– Please provide a description of your cyber security needs"
                                  required maxlength="1000" pattern="^[^<>]{10,1000}$"
                                  title="No invalid characters allowed (10-1000 characters)"></textarea>
                        <div class="invalid-feedback" id="message-error">Message must be 10-1000 characters and cannot contain < or > characters.</div>
                    </div>
                </div>

                <div class="mt-4 d-flex justify-content-center">
                    <button type="submit" class="btn dt-cyber-btn-submit">Submit*</button>
                </div>
            </form>
        </div>
    </div>

    <p class="copyright" style="margin-top: auto; padding-top: 4rem; padding-bottom: 3rem; text-align: center;">Copyright © 2025 DragoTactical Cyber. All Rights Reserved.</p>
</div>

<!-- Front-end validation for Cyber Services form -->
<script src="~/js/form-validation.js"></script>
