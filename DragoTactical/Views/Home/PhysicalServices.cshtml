@model IEnumerable<DragoTactical.Models.Service>
@{
    ViewData["Title"] = "Physical Services Page";
}

<!-- Hero Section -->
<header class="bg-physical-services text-white position-relative overflow-hidden">
    <div class="hero-section-text container-responsive text-center">

        <!-- Circuit decor for the top hero section -->
        <div class="circuit-box">
            <img src="~/images/WhiteCircuit.png" class="circuit1" alt="Circuit design">
        </div>

        <h1 class="phc-title lh-lg display-4 mb-5 mt-3">
            Physical Services
        </h1>

        <p class="hero-desc fw-normal fs-3 mb-5">
            Taking your Physical Security for Granted?
        </p>

        <!-- Circuit decor for the bottom hero section -->
        <div>
            <img src="~/images/InvertedWhiteCircuit.png" class="circuit2" alt="Circuit design">
        </div>
    </div>

</header>

<!-- Services Section -->
<section class="services-section py-5 position-relative overflow-hidden">
    <div class="container mx-auto px-4">
        <div class="phs-desc row justify-content-center text-center mb-5">
            <div class="col mx-auto">
                <p class="fs-5 text-black mb-4">
                    Physical threat vectors (theft, malware, sabotage) focus on physical security
                    weaknesses. Once breached, they can compromise your business and affect
                    your sustainability. It’s a fatal flaw to underestimate your security measures!
                </p>
                <p class="fs-5 text-black">
                    Let our team of certified professionals, both armed and unarmed, help
                    you on your journey to safeguarding your most valuable assets.
                </p>
            </div>
        </div>

        <h2 class="card-main-title text-center fw-bold mb-5">
            Our  Services
        </h2>

        <div class="container-card mx-auto">

            <!-- Services Decor -->
            <div class="phy-bg-decor">
                <img src="~/images/Wavy1.png" class="wavy-element" alt="Wavy design">
                <img src="~/images/Wavy2.png" class="wavy-element2" alt="Wavy design">
                <img src="~/images/Wavy3.png" class="wavy-element3" alt="Wavy design">
                <img src="~/images/Wavy4.png" class="wavy-element4" alt="Wavy design">
            </div>

            <div class="row row-gutters">
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Risk Analysis & <br />Security Audits</h5>
                        <p class="physical-card-desc">
                            We identify your vulnerabilities before a
                            threat does. Our experts conduct
                            thorough assessments of your property
                            and procedures to pinpoint risks
                            and provide a clear, actionable plan to
                            strengthen your defenses.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body p-4">
                        <h5 class="card-title">On-Site Security Personnel <br />/ VIP Protection</h5>
                        <p class="physical-card-desc">
                            Professional, licensed and highly-trained
                            officers whose presence acts as a
                            deterrent and allows for immediate
                            response to security incidents. Our
                            service provides security guards to
                            patrol and monitor a location,
                            and specialized close-protection officers
                            to ensure the safety of
                            high-profile individuals.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Surveillance Systems</h5>
                        <p class="physical-card-desc">
                            We design, install, and maintain video
                            monitoring technology, such as CCTV
                            cameras and video analytics software.
                            These systems provide continuous
                            monitoring, record evidence, and can be
                            used for both real-time observation
                            and post-incident investigations.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Access Control Solutions</h5>
                        <p class="physical-card-desc">
                            Control who enters your space and
                            when. From electronic keycards to
                            biometric scanners, we provide tailored
                            systems that secure entry points,
                            manage visitor flow, and protect your
                            most sensitive areas.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Alarm and Emergency Response Systems</h5>
                        <p class="physical-card-desc">
                            Your 24/7 digital sentinel. Our integrated
                            intrusion detection systems trigger
                            immediate alerts for breaches,
                            fires, or emergencies, and can be linked
                            directly to our rapid response team
                            or local authorities.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Project Management</h5>
                        <p class="physical-card-desc">
                            A seamless, stress-free security
                            installation. We manage your entire
                            project from concept to completion,
                            ensuring your new systems are delivered
                            on time, on budget, and integrated
                            perfectly with your operations.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Security Consulting</h5>
                        <p class="physical-card-desc">
                            Strategic guidance from industry experts.
                            We analyze your unique security
                            challenges and develop comprehensive,
                            long-term strategies to protect your
                            people, assets, and reputation.
                        </p>
                    </div>
                </div>
                <div class="col-md-6 d-flex flex-column">
                    <div class="card-body">
                        <h5 class="card-title">Vehicle & Perimeter Security</h5>
                        <p class="physical-card-desc">
                            Secure your first line of defense. We
                            implement robust solutions, from fencing
                            and bollards to gate systems and
                            patrols, to protect the outer boundaries
                            of your property and vehicle assets
                            from unauthorized access.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Form Section -->
<section class="contact-section py-5 position-relative overflow-hidden">

    <div>
        <img src="~/images/BlackCircuitDown.png" class="black-circuit" alt="Circuit design" />

        <h2 class="form-title text-black text-center fw-bold mb-5">
            Contact Us
        </h2>

        <img src="~/images/BlackCircuitUp.png" class="black-circuit2" alt="Circuit design" />
    </div>

    <div class="physical-contact container mx-auto justify-content-center">
        <div class="security-warning">
            This form is secured with CSRF protection and input validation. All data is sanitized before processing.
        </div>

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success" role="alert">
                @TempData["SuccessMessage"]
            </div>
        }

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger" role="alert">
                @TempData["ErrorMessage"]
            </div>
        }

        <form class="phy-form" method="post" action="/Contact/Submit" id="physicalContactForm" novalidate autocomplete="off">
            @Html.AntiForgeryToken()  @* Prevent CSRF attacks *@
            <div class="row g-3">
                <div class="col-12">
                    <input class="form-control phy-input" name="FirstName" type="text" placeholder="First Name*" required
                           minlength="2" maxlength="50" pattern="^[A-Za-z\s]{2,50}$"
                           title="Only letters allowed (2-50 characters)" />
                </div>
                <div class="col-12">
                    <input class="form-control phy-input" name="LastName" type="text" placeholder="Last Name*" required
                           minlength="2" maxlength="50" pattern="^[A-Za-z\s]{2,50}$"
                           title="Only letters allowed (2-50 characters)" />
                </div>
                <div class="col-12">
                    <input class="form-control phy-input" name="Email" type="email" placeholder="Email*" required
                           maxlength="254" />
                </div>
                <div class="col-12">
                    <input class="form-control phy-input" name="PhoneNumber" type="tel" placeholder="Phone*" required
                           minlength="7" maxlength="15" pattern="^\+?[0-9\s\-]{7,15}$"
                           title="Enter a valid phone number" />
                </div>
                <div class="col-12">
                    <input class="form-control phy-input" name="CompanyName" type="text" placeholder="Company name (Optional)"
                           maxlength="100" pattern="^[^<>]{0,100}$"
                           title="No invalid characters allowed" />
                </div>
                <div class="col-12">
                    <select class="form-select phy-input" name="Location" required>
                        <option value="">Location*</option>
                        <option value="South Africa">South Africa</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="United States">United States</option>
                        <option value="Europe">Europe</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="col-12">
                    <select class="form-select phy-input" name="ServiceId" required>
                        <option value="">Physical Services of Interest*</option>
                        @if (Model != null)
                        {
                            foreach (var service in Model)
                            {
                                <option value="@service.ServiceId">@service.ServiceName</option>
                            }
                        }
                        <option value="0">Other</option>
                    </select>
                </div>
                <div class="col-12">
                    <textarea class="form-control phy-input" name="Message" rows="4" placeholder="Message– Please provide a description of your physical security needs"
                              required maxlength="1000" pattern="^[^<>]{10,1000}$"
                              title="No invalid characters allowed (10-1000 characters)"></textarea>
                </div>
            </div>

            <div class="mt-4 d-flex justify-content-center">
                <button type="submit" class="btn phy-btn-primary">Submit*</button>
            </div>
        </form>
    </div>

    <div>
        <img src="~/images/CircuitCircleLeft.png" class="circle-circuit" alt="Circuit design" />

        <p class="copyright">Copyright © 2025 DragoTactical Cyber. All Rights Reserved.</p>

        <img src="~/images/CircuitCircleRight.png" class="circle-circuit2" alt="Circuit design" />
    </div>
</section>

<!-- Front-end security JS -->
<script>
    document.getElementById('physicalContactForm').addEventListener('submit', function(e) {
        console.log('Physical form submission started');
        alert('Your form was submitted!');

        let valid = true;
        const inputs = this.querySelectorAll('input, textarea, select');

        inputs.forEach(input => {
            input.value = input.value.trim();

            if (/<|>/.test(input.value)) {
                alert('Please remove invalid characters like < or > from your input.');
                valid = false;
            }

            if (!input.checkValidity()) {
                input.reportValidity();
                valid = false;
            }

            input.value = input.value.replace(/[<>]/g, '');
        });

        if (!valid) {
            e.preventDefault();
            console.log('Physical form validation failed');
        } else {
            console.log('Physical form validation passed, submitting...');
        }
    });
</script>